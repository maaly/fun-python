#!/usr/bin/env python

from itertools import chain

def findtriangles(topo):                                      # this function ALWAYS triple append triangles and that's OK!
    """Count number of triangles based on provided topology information."""

    tri = []
    i = 0                                                     #i is the reference vertex
    for p in topo:                                            #loop over ref. vertices 
        for l in range (len(p)):                              #determine how many lines radiates from the ref. vertex
            for j in p[l]:                                    #from points on lines radiated from the ref. vertex...
                for k in list(chain(*p[l+1:])):               #find the combinations of 2 points not on the same line
                    if k in list(chain(*topo[j])):            #check if there is a connection between any of these 2 points 
                       tri.append([i,j,k])                    # if there is a connection, a triangle is found
        i += 1
    return tri 


# topology definition:
# one entry per point and each item is
# a list of points on a straight line

# test case 1
#          0
#         / \
#        /   \
#       1-----2
#      / \   /
#     /   \ /
#    3-----4
topo1 = [
    [[1,3],[2]],
    [[0,3],[2],[4]],
    [[0], [1],[4]],
    [[0,1],[4]],
    [[1],[2],[3]]
]


# test case 2
#          0
#         / \
#        /   \
#       1-----2
#      / \   / \
#     /   \ /   \
#    3-----4-----5
topo2 = [
    [[1, 3],[2,5]],
    [[0,3],[2],[4]],
    [[0,5],[1],[4]],
    [[0,1],[4,5]],
    [[1],[2],[3,5]],
    [[0,2],[3,4]]
]

# the original task with the known result
#                        0
#                       / \
#                      /   \
#                     1     2
#                    / \   / \
#                   /   \ /   \
#                  /     3     \
#                 4-,   / \   ,-5
#                /   \ /   \ /   \
#               /    /6     7\    \
#              /    /  \   /  \    \
#             /    /    \ /    \    \
#            /    /     /8\     \    \
#           9-\  /     /   \     \  /10
#          /   \11    /     \    12/   \
#         /   /  \   /       \   /  \   \
#        /   /    \ /         \ /    \   \
#       /   /     -13\_      _ /14    \   \
#      /   /     /     \_15_/    \     \   \
#     /   /    /     __/    \__    \    \   \
#    /  /    /    __/          \__   \    \  \
#   /  /   /   __/                \__  \   \  \
#  /  /  /  __/                      \__ \   \ \
# / /__/___/                            \__\__ \\
# 16/-------------------------------------------17 


topo3 = [
    [[2,5,10,17],[1,4,9,16]],           #  0
    [[3,7,12,17],[0,4,9,16]],           #  1
    [[0,5,10,17],[3,6,11,16]],          #  2
    [[1,7,12,17],[2,6,11,16]],          #  3
    [[6,8,14,17],[0,1,9,16]],           #  4
    [[0,2,10,17],[7,8,13,16]],          #  5
    [[4,8,14,17],[2,3,11,16]],          #  6
    [[1,3,12,17],[5,8,13,16]],          #  7
    [[4,6,14,17],[5,7,13,16]],          #  8
    [[11,13,15,17],[0,1,4,16]],         #  9
    [[0,2,5,17],[12,14,15,16]],         # 10
    [[9,13,15,17],[2,3,6,16]],          # 11
    [[1,3,7,17],[10,14,15,16]],         # 12
    [[9,11,15,17],[5,7,8,16]],          # 13
    [[4,6,8,17],[10,12,15,16]],         # 14
    [[9,11,13,17],[10,12,14,16]],       # 15
    [[0,1,4,9],[2,3,6,11],[5,7,8,13],[10,12,14,15],[17]],  # 16
    [[0,2,5,10],[1,3,7,12],[4,6,8,14],[9,11,13,15],[16]]   # 17
    ]

#Topology 4 data, check image in repository

topo4 = [
    [[2,7,12,22],[4,9,16,19,24],[5,10,17,20],[3,8,15,18,23],[1,6,11,21]],   #0
    [[3,5,9,14,22],[0,6,11,21]],                                            #1
    [[0,7,12,22],[4,5,8,13,21]],                                            #2
    [[1,5,9,14,22],[0,8,15,18,23]],                                         #3
    [[0,9,16,19,24],[2,5,8,13,21]],                                         #4
    [[1,3,9,14,22],[0,10,17,20],[2,4,8,13,21]],                             #5
    [[8,10,16,22],[0,1,11,21]],                                             #6
    [[0,2,12,22],[9,10,15,21]],                                             #7         
    [[6,10,16,22],[0,3,15,18,23],[2,4,5,13,21]],                            #8
    [[1,3,5,14,22],[0,4,16,19,24],[7,10,15,21]],                            #9
    [[6,8,16,22],[0,5,17,20],[7,9,15,21]],                                  #10
    [[13,15,17,19,22],[0,1,6,21]],                                          #11
    [[0,2,7,22],[14,16,17,18,21]],                                          #12
    [[11,15,17,19,22],[2,4,5,8,21]],                                        #13
    [[1,3,5,9,22],[12,16,17,18,21]],                                        #14
    [[11,13,17,19,22],[0,3,8,18,23],[7,9,10,21]],                           #15
    [[6,8,10,22],[0,4,9,19,24],[12,14,17,18,21]],                           #16
    [[11,13,15,19,22],[0,5,10,20],[12,14,16,18,21]],                        #17
    [[0,3,8,15,23],[12,14,16,17,21]],                                       #18
    [[11,13,15,17,22],[0,4,9,16,24]],                                       #19
    [[0,5,10,17],[22,24,23,21]],                                            #20
    [[22,24,20,23],[12,14,16,17,18],[7,9,10,15],[2,4,5,8,13],[0,1,6,11]],   #21
    [[0,2,7,12],[1,3,5,9,14],[6,8,10,16],[11,13,15,17,19],[21,23,20,24]],   #22
    [[22,24,20,21],[0,3,8,15,18]],                                          #23
    [[0,4,9,16,19],[22,20,23,21]]                                           #24
    ]


#Axel's topolgy data for topology 4, check the image on Axel's webpage

topo5 = [
    [[1,6,11,20],[2,7,13,18,21],[3,8,14,22],[4,9,15,19,23],[5,10,17,24]], #  0
    [[0,6,11,20],[2,3,9,16,24]],                                          #  1
    [[0,7,13,18,21],[1,3,9,16,24]],                                       #  2
    [[5,4,7,12,20],[0,8,14,22],[1,2,9,16,24]],                            #  3
    [[5,3,7,12,20],[0,9,15,19,23]],                                       #  4
    [[4,3,7,12,20],[0,10,17,24]],                                         #  5
    [[0,1,11,20],[7,8,15,24]],                                            #  6
    [[5,4,3,12,20],[0,2,13,18,21],[6,8,15,24]],                           #  7
    [[10,9,13,20],[0,3,14,22],[6,7,15,24]],                               #  8
    [[10,8,13,20],[0,4,15,19,23],[1,2,3,16,24]],                          #  9
    [[9,8,13,20],[0,5,17,24]],                                            # 10
    [[0,1,6,20],[12,13,14,19,24]],                                        # 11
    [[5,4,3,7,20],[11,13,14,19,24]],                                      # 12
    [[10,9,8,20],[0,2,7,18,21],[11,12,14,19,24]],                         # 13
    [[17,16,15,18,20],[0,3,8,22],[11,12,13,19,24]],                       # 14
    [[17,16,14,18,20],[0,4,9,19,23],[6,7,8,24]],                          # 15
    [[17,15,14,18,20],[1,2,3,9,24]],                                      # 16
    [[16,15,14,18,20],[0,5,10,24]],                                       # 17
    [[17,16,15,14,20],[0,2,7,13,21]],                                     # 18
    [[0,4,9,15,23],[11,12,13,14,24]],                                     # 19
    [[0,1,6,11],[5,4,3,7,12],[10,9,8,13],[17,16,15,14,18],[24,23,22,21]], # 20
    [[0,2,7,13,18],[20,22,23,24]],                                        # 21
    [[0,3,8,14],[20,21,23,24]],                                           # 22
    [[0,4,9,15,19],[20,21,22,24]],                                        # 23
    [[0,5,10,17],[1,2,3,9,16],[6,7,8,15],[11,12,13,14,19],[20,21,22,23]]  # 24
    ]




tri = findtriangles(topo1)
print "Topology 1:",len(tri)/3, "triangles\n "#, tri

tri = findtriangles(topo2)
print "Topology 2:",len(tri)/3, "triangles\n "#, tri

tri = findtriangles(topo3)
print "Topology 3:",len(tri)/3, "triangles\n "#, tri

tri = findtriangles(topo4)
print "Topology 4a:",len(tri)/3, "triangles\n "#, tri

tri = findtriangles(topo5)
print "Topology 4b:",len(tri)/3, "triangles\n "#, tri






